{% extends 'base.html' %}
{% block content %}
<form hx-post="https://sdcapi.datadrivendetroit.org/tearsheet/sheet"
      hx-indicator="#build_ind"
      hx-params="*"
      hx-target="#data_table"
      hx-select="#data_table"
      hx-swap="outerHTML">
    <input name="geographies" placeholder="Enter geographies here"></input>
    <div hx-target="this" hx-swap="outerHTML">
        <input type="text"
               name="indicators" 
               hx-post="https://sdcapi.datadrivendetroit.org/tearsheet/validate-program"
               hx-trigger="keyup delay:500ms changed"
               hx-indicator="#val_ind"
               placeholder="Enter indicators here"></input>
        <div id="val_ind" class="htmx-indicator"><p>Validating indicators</p></div>
        {% if helpers %}
        <ul>
            {% for helper in helpers %}
                <li>{{ helper }}</li>
            {% endfor %}
        </ul>
        {% endif %}
    </div>
    <input name="how" type="hidden" value="html"></input>
    <button>Create tearsheet</button>
</form>
<div id="table_link"></div>
<div id="build_ind" class="htmx-indicator"><p>Preparing tearsheet!</p></div>
<div id="data_table"></div>
{% endblock %}
